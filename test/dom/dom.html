<!DOCTYPE html>
<html>
<head>
  <title>DOM TEST</title>
  <script src="../../dist/tooly.js"></script>
</head>
<style>
  body {
    width: 50%;
    margin: 0 auto;
  }
  .z {
    border: 1px solid black;
    text-align: center;
  }
  .red { color: red; }
  .green { color: green; }
  .yellow { color: yellow; }
  .blue { color: blue; }
</style>
<body>
<div class="container remove">
  <div class="inner-container remove">
    <ul class="remove">
      <li class="remove">list item #1</li>
      <li class="remove">list item #2</li>
      <li class="remove">list item #3</li>
    </ul>
    <div class="remove z a">.z .a</div>
    <div class="remove z b">.z .b</div>
    <div class="remove z c">.z .c</div>
  </div>
</div>
<script>
  window.onload = function() {

    var logger = tooly.Logger(0, 'DOM-TEST');
    var $ = tooly.Frankie.bind(this);
    var css = 'color: #0080FF;';
    var heading = 'color: #800080; font-size: 18px';
    
    function run() {
      // all();
      // hasClass();
      // addClass(); // conflicts when removeClass is being used
      // removeClass(); // deps on addClass
      // prepend();
      // append();
      // html();
      // attr();
      // empty();
      // toggleClass();
    }

    function all() {
      var el = $('body')
        .empty()
        .append('<div>Hello</div>')
        .children() // select previously created div
        .addClass('firstClass coach')
        .css({ background: 'yellow', color: 'dark-gray' })
        .attr('data-whatever', '998877')
        .parent() // back to the body
        .append($('body').children()) // duplicate the div
        .children().eq(1) // select our newly copied div
        .html(', world!');
    }

    function hasClass() {
      console.group();
      logger.info('%c#hasClass ->', heading);

      logger.debug('tooly.hasClass("z", "c"): %o', 
        tooly.hasClass('.z', 'c'));

      logger.debug('tooly.hasClass(document.querySelector(".z"), "a"): %o', 
        tooly.hasClass(document.querySelector('.z'), 'a'));

      logger.debug('tooly.hasClass(document.querySelectorAll(".z"), "c"): %o', 
        tooly.hasClass(document.querySelectorAll('.z'), 'c'));

      logger.debug('tooly.hasClass(tooly.select(".z"), "a"): %o', 
        tooly.hasClass(tooly.select('.z'), 'a'));

      logger.debug('tooly.hasClass(tooly.selectAll(".z"), "c"): %o', 
        tooly.hasClass(tooly.selectAll('.z'), 'c'));

      logger.debug('tooly.hasClass($(".z"), "c"): %o', 
        tooly.hasClass($(".z"), "c"));

      logger.debug('tooly.hasClass($(".z").get(2), "c"): %o', 
        tooly.hasClass($(".z").get(2), "c"));

      console.groupEnd();    
    }

    function addClass() {
      console.group();
      logger.info('%c#addClass -> (check element view)', heading);

      logger.debug('.z.c should have class XXX');
      tooly.addClass('.z.c', 'XXX');

      logger.debug('container should have classes QQQ, WWW, and EEE');
      tooly.addClass('div.container', 'QQQ WWW EEE');

      logger.debug('ul should have class RRR');
      tooly.addClass('ul', 'RRR');

      logger.debug('each li should have classes TTT YYY UUU');
      tooly.addClass('li', 'TTT YYY UUU');

      logger.debug('each li should have class peach');
      var $li = tooly.selectAll('li');
      tooly.addClass($li, 'peach');

      logger.debug('only the 1st li should have class peachynooshka');
      $li = tooly.select('li');
      tooly.addClass($li, 'peachynooshka');

      logger.debug('no duplicate classes should be added');
      tooly.addClass('*', 'remove');

      logger.debug('all remove should have .also');
      var removes = tooly.selectAll('.remove');
      tooly.addClass(removes, 'also');

      logger.debug('all li and z should have .multi');
      $('li, .z').addClass('multi');


      console.groupEnd();
    }

    function removeClass() {
      console.group();
      logger.info('%c#removeClass -> (check element view)', heading);

      logger.debug('.remove should be gone');
      tooly.removeClass('*', 'remove');

      logger.debug('.z.c should remove class XXX');
      tooly.removeClass('.z.c', 'XXX');

      logger.debug('.container should have no extra classes');
      tooly.removeClass(tooly.select(".container"), 'QQQ also EEE WWW');

      logger.debug('no div should have .also');
      tooly.removeClass(tooly.selectAll("div"), 'also');

      logger.debug('should fail gracefully');
      tooly.removeClass(tooly.selectAll("*"), 'maniac');

      logger.debug('scripts should not have .also');
      $('script').removeClass('also');

      logger.debug('html, head, body should not have .also');
      $('html, head, body').removeClass('also');


      console.groupEnd();
    }

    function prepend() {
      console.group();
      logger.info('%c#prepend -> (check element view)', heading);

      var $divs = $('div');
      var $li = $('li');

      logger.debug('divs text PEACHY');
      tooly.prepend($divs, 'PEACHY');

      logger.debug('last li PEACHY');
      tooly.prepend($li.get(2), 'WAHT TEH FUKC!');

      logger.debug('all li hElLO');
      tooly.prepend(tooly.selectAll('li'), 'hElLO');

      logger.debug('2nd li vrooom');
      tooly.prepend(tooly.select('li:nth-of-type(2)'), 'vrooom');

      logger.debug('2nd li vrooom (again)');
      $li.prepend('vrooom');

      logger.debug('all divs some color');
      $divs.prepend('<div style="color:red;">RED</div>');

      $('body').prepend(tooly.tag('h1', 'JOSHUA JAY KLECKNER'));

      console.groupEnd();
    }

    function append() {
      console.group();
      logger.info('%c#append -> (check element view)', heading);

      var $divs = $('div');
      var $li = $('li');

      logger.debug('divs text PEACHY');
      tooly.append($divs, 'PEACHY');

      logger.debug('last li WAHT TEH FUKC!');
      tooly.append($li.get(2), 'WAHT TEH FUKC!');

      logger.debug('all li hElLO');
      tooly.append(tooly.selectAll('li'), 'hElLO');

      logger.debug('2nd li vrooom');
      tooly.append(tooly.select('li:nth-of-type(2)'), 'vrooom');

      logger.debug('2nd li vrooom (again)');
      $li.append('vrooom');

      logger.debug('all divs + BLUE');
      $divs.append('<div style="color:blue;">BLUE</div>');

      console.groupEnd();
    }

    function html() {
      console.group();
      logger.info('%c#html -> (check element view)', heading);    
      
      logger.debug('adding red to first .z');
      var z = tooly.select('.z', '.container');
      logger.debug('z: %o, tooly.type(z): %o', z, tooly.type(z));
      tooly.html(z, tooly.html(z) + '<div class="red">RED HTML</div>');

      logger.debug('adding green to 2nd .z');
      z = $('.z');
      z.eq(1).html(z.eq(1).html() + '<div class="green">GREEN HTML</div>');

      logger.debug('adding blue to last z');
      $(z.get(2)).html(z.eq(2).html() + '<div class="blue">BLUE HTML</div>');

      console.groupEnd();
    }

    function attr() {
      console.group();
      logger.info('%c#attr ->', heading);

      var div = document.querySelector('div');
      var a = div.getAttribute('class');
      logger.debug('native single select & getAttribute ->\n\tdiv: %o\n\tattr: %s', div, a);

      var $container = tooly.select('.container');
      logger.debug('tooly single sel+get ->\n\tattr: %s', tooly.attr($container, 'class'));

      var $divs = tooly.selectAll('.container');
      logger.debug('tooly multi sel+get\n\tattr: %s', tooly.attr($divs, 'class'));

      var $item = $('.z');
      logger.debug('Frankie get ->\n\tattr: %s', $item.attr('class'));

      logger.debug('tooly.attr($container, "width", "40px")');
      tooly.attr($container, 'width', '40px');

      logger.debug('$item.attr("width", "20px")->');
      $item.attr("width", "20px");

      logger.debug('$item.attr({height:"100px", etc...})->');
      $item.attr({height: '100px',id: 'chopSuey',nonexist: 'whatever bruhddy'});

      console.groupEnd();
    }

    function empty() {
      console.group();
      logger.info('%c#empty ->', heading);
      logger.debug('should be empty body');
      tooly.empty('body');
    }

    function toggleClass() {
      tooly.Frankie.prototype.toggleClass = function(klass) {
        var i = 0, len = this.els.length, el;
        logger.debug(this.els, this.els.length);
        for (; i < len; i++) {
          el = this.eq(i);
          logger.debug(el);
          if (el.hasClass(klass)) {
            el.removeClass(klass);
          } else {
            el.addClass(klass);
          }
        }
        return this;
      };
      var div = $('div');
      logger.debug(div);
      div.on('click', function() {
        div.toggleClass('eee');
      });
    }

    toggleClass();

    // misc.
    // $('div').eq(0).prepend(document.createElement('section'));
  };

</script>
</body>
</html>