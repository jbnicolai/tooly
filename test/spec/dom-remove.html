<!DOCTYPE html>
<html>
<head>
  <title>#remove</title>
  <link rel="stylesheet" type="text/css" href="../dom/style.css">
  <script src="../../dist/tooly.js"></script>
</head>
<body>

  <header>
    <h1>#remove</h1>
    <nav>
      <h3>nav -></h3>
      <ol>
        <li>list item #1</li>
        <li>list item #2</li>
        <li>list item #3</li>
      </ol>
    </nav>
    <div id="one">
      <h3>#one</h3>
      <ol>
        <li>list item #1</li>
        <li>list item #2</li>
        <li>list item #3</li>
      </ol>      
    </div>
    <div id="two">
      <h3>#two</h3>
      <ol>
        <li>list item #1</li>
        <li>list item #2</li>
        <li>list item #3</li>
      </ol>      
    </div>    
  </header>

  <main>
    <div class="a z">.a .z</div>
    <div class="b z">.b .z</div>
    <div class="c z">.c .z</div>
  </main>


  <section>
    <div class="x">1</div>
    <div class="x">2</div>
    <div class="x">3</div>
    <div class="x">4</div>
    <div class="x">5</div>
    <div class="x">6</div>
    <div class="x">7</div>
  </section>

  <section>
    <article>
      <h2>Spec:</h2>
      <ol>
        <li>tooly.remove(el) shall remove all matched el(s) from the dom.</li>
        <li>tooly.remove(context, el) shall remove all matched el(s) from context only.</li>
        <li>#Frankie(el).remove() shall remove all of its els from dom and array.</li>
        <li>#Frankie(context).remove(el) shall remove all matched el(s) from context only.</li>
      </ol>
      <aside>
        In all above cases, el and context can be:
        <ol>
          <li>valid css selector string</li>
          <li>node</li>
          <li>nodelist (which will be converted to...</li>
          <li>array of nodes</li>
          <li>Frankie instance</li>
        </ol>
      </aside>
    </article>
  </section>

  <footer></footer>
<script type="text/javascript">

  window.onload = run;

  function run() {
    var $ = tooly.Frankie.bind(this),
        logger = tooly.Logger(0, 'TEST'),
        _type = tooly.type.bind(this),
        $footer = $('footer'),
        debug = function(msg) { $footer.append('<br> &gt; ' + msg); };

    function _toArray(obj) {
      return [].map.call(obj, function(el) { return el; });
    }        

    function _node(el) {
      return  el && (el.nodeType === 1 || el.nodeType === 9);
    }

    function _prepEl(el, context) {
      if (el instanceof tooly.Frankie) {
        return el.els;
      } else if (_type(el, 'string')) {
        return tooly.selectAll(el);
      } else if (_type(el, 'nodelist')) {
        return _toArray(el);
      }
      return el;
    }        

    function remove(element, context, returnRemoved) {
      var el, parent, ret;
      if (context) {
        parent = _prepEl(context);
        if (_node(parent)) {
          el = tooly.selectAll(element, parent);
        } /*else if ()*/
      }
      el = _prepEl(element);
      if (!el) return tooly;
      function _remove(x) {
        if (!parent) return x.parentNode.removeChild(x);
        if (_node(parent)) {
          logger.debug('x: %o, parent.children: %o', x, parent.children);
        }
      }
      ret = _node(el) ? _remove(el) : el.map(_remove);
      return returnRemoved ? ret : tooly;
    }

    tooly.Frankie.prototype.remove = function(element) {
      return remove(element, this.els);
    };

    debug('CHECKLIST:');
    debug('#remove(string)');
    debug('#remove(string, string)');
    debug('#remove(string, node)');
    debug('#remove(string, nodelist)');
    debug('#remove(string, array<node>)');

    console.group('tooly');

      // console.log('');
      // logger.info('string ->');
      // logger.info('nav li:last-child');
      // remove('nav li:last-child');

      // console.log('');
      // logger.info('string string ->');
      // logger.info('li:first-child, nav ol');
      // remove('li:first-child', 'nav ol');

      console.log('');
      logger.info('string node ->');
      logger.info('li:nth-of-type(2), qs#one');
      remove('li:nth-of-type(2)', document.querySelector('#one'));

      // console.log('');
      // logger.info('string node ->');
      // logger.info('li:nth-of-type(2), qsa#two');
      // remove('li:nth-of-type(2)', document.querySelectorAll('#two'));  

    console.groupEnd();

    
  }
</script>
</body>
</html>