/*!
 * tooly - version 0.0.4 (built: 2014-10-21)
 * js utility functions
 * https://github.com/Lokua/tooly.git
 * Copyright (c) 2014 Joshua Kleckner
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/MIT
 */
!function(a,b){"function"==typeof define&&define.amd?define("tooly",[],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.tooly=b()}(this,function(){/*!
 * @see  tooly#type
 */
function a(a,b){return a={}.toString.call(a).match(e)[1].toLowerCase(),b?a===b.toLowerCase():a}/*!
 * @see  tooly#basicExtend
 */
function b(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var c,d=/\s+/,e=/\s([a-z]+)/i,f=Array.prototype.slice,g=function(){/*!
   * underscore's #each
   * @see  tooly#each
   */
function b(a,b,c){if(null!=a){if(p&&a.forEach===p)a.forEach(b,c);else{var d=0,e=a.length;if(e===+e)for(;e>d;d++)b.call(c,a[d],d,a);else{var f=Object.keys(a);for(e=f.length;e>d;d++)b.call(c,a[f[d]],f[d],a)}}return a}}function e(a){return[].map.call(a,function(a){return a})}function h(a){return a.sort().filter(function(b,c){return!c||b!=a[c-1]})}function i(a){return q[a]||(q[a]=new RegExp("\\s*"+a+"\\s*(![\\w\\W])?","g")),q[a]}function j(a,b,c){var e=a.className.split(d);return e.some(function(a){return a.match(c)==b})}function k(a,b){if(!a.className)return void(a.className+=b?" "+b:"");var c=a.className;a.className+=" "+b.split(d).filter(function(a){return-1===c.indexOf(a)}).join(" ")}function l(a){return a&&(1===a.nodeType||9===a.nodeType)}function m(b){return b instanceof g.Frankie?b.els:a(b,"string")?g.selectAll(b):a(b,"nodelist")?e(b):b}var n,o,p=Array.prototype.forEach,q={},r=/{(\d+)}/g;return{select:function(b,c){var d;return c&&(d=m(c),a(d,"array")&&(d=d[0])),(l(d)?d:document).querySelector(b)},selectAll:function(b,c){var d;return c&&(d=m(c),a(d,"array")&&(d=d[0])),e((l(d)?d:document).querySelectorAll(b))},parent:function(b){var c=m(b);return l(c)?c.parentNode:a(c,"array")?h(c.map(function(a){return a.parentNode})):void 0},children:function(b){var c=m(b);return l(c)?c.children:a(c,"array")?c.map(function(a){return a.children}):void 0},hasClass:function(b,c){var d=m(b);if(l(d))return j(d,c,i(c));if(a(d,"array")){var e=i(c);return d.some(function(a,b,d){return j(d[b],c,e)})}return!1},addClass:function(b,c){var d=m(b);return l(d)?k(d,c):a(d,"array")&&d.forEach(function(a){k(a,c)}),g},removeClass:function(b,c){function e(a){a.className=a.className.replace(i(c)," ").trim()}var f=m(b);return c="("+c.split(d).join("|")+")",l(f)?e(f):a(f,"array")&&f.forEach(e),g},prepend:function(b,c){function d(a){a.insertAdjacentHTML("afterbegin",c)}var e=m(b);return l(e)?d(e):a(e,"array")&&e.forEach(d),g},append:function(b,c){function d(a){a.insertAdjacentHTML("beforeend",f)}var f,h=m(b);if(a(c,"string"))f=c;else{var i=a(c);if(f=l(c)?c.outerHTML:c instanceof g.Frankie?c.els:"array"===i&&l(c[0])?c:"nodelist"===i?e(c):null,a(f,"array"))f=f.map(function(a){return a.outerHTML}).join("");else if(!f)return g}return l(h)?d(h):a(h,"array")&&h.forEach(d),g},empty:function(b){function c(a){for(;a.lastChild;)a.removeChild(a.lastChild)}var d=m(b);return a(d,"array")?d.forEach(c):c(d),g},html:function(b,c){if(1===arguments.length)return"array"===a(b)&&l(b[0])?b[0].innerHTML:l(b)?b.innerHTML:g.select(b).innerHTML;if(!l(b)){if("array"===a(b)){for(var d=0,e=b.length;e>d;d++)l(b[d])?b[d].innerHTML=c:(b[d]=g.select(b[d]),b[d].innerHTML=c);return g}return g.select(b).innerHTML=c,g}return b.innerHTML=c,g},css:function(){var b=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])},c=m(arguments[0]),d=arguments.length,e={},f=!0;if(d>1&&(3===d?e[arguments[1]]=arguments[2]:e=arguments[1]),e){if(l(c))return b(c,e),g;if(a(c,"array"))return f=!1,c.forEach(function(a){b(a,e)}),g}return f?c.style:c[0].style||void 0},attr:function(){var b,c,d=m(arguments[0]),e=arguments.length,f=a(d,"array");if(!f&&!l(d)||1>=e||e>3)return null;if(c=arguments[1],2===e){if(!a(c,"object"))return b=(f?d[0]:d).getAttribute(c),""===b?null:b;for(var h in c)c.hasOwnProperty(h)&&(f?d.forEach(function(a){a.setAttribute(h,c[h])}):d.setAttribute(h,c[h]))}else if(f){var i=arguments[2];d.forEach(function(a){a.setAttribute(c,i)})}else d.setAttribute(c,arguments[2]);return g},Frankie:function(a,b){return this instanceof g.Frankie?(this.els=l(a)?[a]:g.selectAll(a,b),this):new g.Frankie(a,b)},scale:function(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d},construct:function(b,c){function d(){return"array"===a(c)?b.apply(this,c):b.call(this,c)}return d.prototype=b.prototype,new d},basicExtend:function(a,b){return _basicExtend(a,b)},extend:function(){var b,c,d,e,f,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for(a(i,"boolean")&&(l=i,i=arguments[1]||{},j=2),a(i,"object")||a(i,"function")||(i={});k>j;j++)if(b=arguments[j],null!=b){a(b,"string")&&(b=b.split(""));for(c in b)d=i[c],e=b[c],i!==e&&(l&&e&&(g.isHash(e)||(f=a(e,"array")))?(f?(f=!1,h=d&&a(d,"array")?d:[]):h=d&&g.isHash(d)?d:{},i[c]=g.extend(l,h,e)):"undefined"!=typeof e&&(i[c]=e))}return i},fromPrototype:function(a,b){var c,d=Object.create(a);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},inherit:function(a,b,c){b.prototype=new a,b.prototype.constructor=b;for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])},isHash:function(b){return"object"===a(b)&&b.constructor===Object&&!b.nodeType&&!b.setInterval},toType:function(b,c){return a(b,c)},/*! @alias for #toType */
type:function(b,c){return a(b,c)},isFalsy:function(b){if(void 0==b||0==b)return!0;if(a(b,"string")){var c=b.trim();return""===c||"false"===c||"undefined"===c||"null"===c}},/*! alias for #isFalsy */
falsy:function(a){return isFalsy(a)},isTruthy:function(a){return!isFalsy(a)},/*! alias for #isTruthy */
truthy:function(a){return!isFalsy(a)},contains:function(a,b,c){return a.indexOf(b,c||0)>-1},startsWith:function(a,b){return a.substring(0,b.length)===b},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},format:function(a){var b=Array.prototype.slice.call(arguments,1);return c||(c=/\%[ojdifsc]+/gi),a.replace(c,function(a){var c=b.shift();if(void 0!==c){switch(a){case"%o":case"%j":c=JSON.stringify(c);break;case"%d":case"%i":c=0|c;break;case"%f":c=parseFloat(c);break;case"%s":}return c}return a})},formatString:function(a){var b=f.call(arguments,1);return a.replace(r,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},/*! alias for #formatString */
stringFormat:function(){return g.formatString.apply(null,arguments)},formatTime:function(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=Math.floor(a-3600*b-60*c);return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d},formatMoney:function(a){var b=g.type(a,"number")?a:+a;return b.toFixed(2).replace(/./g,function(a,b,c){return!b||"."===a||(c.length-b)%3?a:","+a})},tag:function(a,b,c){n||(n=/(^[a-z]+\d{1})|[^\s]+[a-z]+(-\w+)?=(["'])(?:(?!\3)[^\\]|\\.)*\3|[.#-_a-z][-\w]+/gi,o=/area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr/i);var d,e,f=a.match(n),a=f.shift(),g="",h="",i="";if(f.forEach(function(a){var b=a.charAt(0);"#"===b?h+=a.slice(1)+'"':"."===b?g+=" "+a.slice(1)+" ":i+=" "+a}),d=o.test(a)?"":"</"+a+">",e=["<",a,h?' id="'+h:"",g?' classes="'+g.trim()+'" ':"",i?i:"",">",b,d].join(""),c){var j=document.createElement("div");return j.innerHTML=e,j.firstChild}return e},repeat:function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},sliceRel:function(a,b,c){var d=!1;return"/"===a.slice(-1)&&(d=!0,a=a.slice(0,-1)),a=a.slice(a.lastIndexOf("/")+1),d&&c&&(a+="/"),b&&(a="/"+a),a},extension:function(a){return a.substring(a.lastIndexOf(".")+1)},stripExtension:function(a){return a.substring(0,a.lastIndexOf("."))},lPad:function(a,b,c){var d=b-a.length;return d>0?g.repeat(c||" ",d)+a:a},rPad:function(a,b,c){var d=b-a.length;return d>0?a+g.repeat(c||" ",d):a},each:function(a,c,d){return b(a,c,d)},sort:function(a,b,c){var d,e,f,g,h;return _sort_re||(_sort_re=/(\d+)|(\D+)/g,_sort_dig_re=/\d+/),a.sort(function(a,i){for(d=String(a[b]).toLowerCase().match(rx),e=String(i[b]).toLowerCase().match(rx),c&&(h=d,d=e,e=h);d.length&&e.length;)if(f=d.shift(),g=e.shift(),rd.test(f)||rd.test(g)){if(!rd.test(f))return 1;if(!rd.test(g))return-1;if(f!=g)return f-g}else if(f!=g)return f>g?1:-1;return d.length-e.length})},getJSON:function(a,b,c){g.get(a,"json",b,c)},get:function(a,b,c,d){var e=new XMLHttpRequest;e.open("get",a,3===arguments.length?!0:d),e.reponseType=b,e.onload=function(){4==e.readyState&&200==e.status&&c("json"===b?JSON.parse(e.response):e.response)},e.send()},Handler:function(a){return this instanceof g.Handler?(this.context=a||this,this.handlers=this.context.handlers={},this):new g.Handler(a)},Timer:function(a){return this instanceof g.Timer?(this.name=a||"Timer_instance_"+Date.now(),this):new g.Timer(a)},funkyTime:function(a,b){var c,d,e=g.Timer(),f=g.Timer(),h=[],i=0;for(b=b||1,e.start();b>i;i++)f.start(),a.call(null,i),h.push(f.stop());return c=e.stop(),d=c/b,{stack:h,total:c,average:d,offset:function(){var a=0;return h.forEach(function(b){a+=b}),parseFloat((c-a/b).toFixed(2))}()}},Logger:function(a,b){var c=this;return g.Logger.loggers=g.Logger.loggers||[],c instanceof g.Logger||(c=new g.Logger(a,b),g.Logger.loggers.push(c)),c.level=void 0!==a?a:2,b&&(c.name=b),c.traceAnonymous=!1,c}}}();return b(g.Frankie.prototype,{get:function(a){return this.els[a]},eq:function(a){return new g.Frankie(this.els[a],this.parent())},zilch:function(){return 0===this.els.length},parent:function(){var a=g.parent(this.els),b=new g.Frankie;return a instanceof Array&&(b.els=a),b},children:function(){var a=g.children(this.els),b=new g.Frankie;return a instanceof Array&&(b.els=a),b},hasClass:function(a){return g.hasClass(this.els,a)},addClass:function(a){return g.addClass(this.els,a),this},removeClass:function(a){return g.removeClass(this.els,a),this},prepend:function(a){return g.prepend(this.els,a),this},append:function(a){return g.append(this.els,a),this},empty:function(){return g.empty(this.els),this},html:function(a){return a?(g.html(this.els,a),this):g.html(this.els[0])},css:function(){var a=[this.els];return[].push.apply(a,arguments),g.css.apply(null,a),this},attr:function(){var a=[this.els];[].push.apply(a,arguments);var b=g.attr.apply(null,a);return b}}),b(g.Handler.prototype,{on:function(a,b){return void 0===this.handlers[a]&&(this.handlers[a]=[]),this.handlers[a].push(b),this},removeAll:function(){this.handlers={}},remove:function(a){void 0!==this.handlers[a]&&(this.handlers[a].length=0)},executeHandler:function(a){for(var b=this.handlers[a]||[],c=0,d=b.length;d>c;c++)b[c].apply(this.context,[]);return this},trigger:function(a){return this.executeHandler(a)},registerCallbacks:function(a){var b=this,c={};if(void 0!==a)for(c in a)a.hasOwnProperty(c)&&b.on(c,a[c]);return b},toString:function(){return"[Handler ' "+this+" ']"}}),b(g.Timer.prototype,{start:function(){this.startTime=Date.now()},stop:function(){return this.endTime=Date.now(),this.elapsed=this.endTime-this.startTime,this.elapsed},end:function(){return this.stop(),this.log(),this.elapsed},log:function(){console.log(this.name+" "+this.elapsed)}}),b(g.Logger.prototype,function(){function a(a,b,i,j){if(!(g.Logger.off||-1===a.level||b<a.level||a.level>5)){var m="%s%s",n=[];if(j=f.call(j),c=c||/\%[ojdifsc]/g,k)g.type(j[0],"string")&&j[0].match(c)&&(m+=j.shift().replace(_o_re,"%j")),n.unshift(m,e(a),h(b));else{m="%c%s%c%s%c%s",g.type(j[0],"string")&&j[0].match(c)&&(m+=j.shift().replace(_j_re,"%o")),i=void 0!==i&&""===i.replace(d,"")?"":i;var o="color:"+_colors[b]+";",p="color:purple",q="color:black";n=[m,p,e(a),o,h(b),q,i]}switch(l.apply(n,j),b){case-1:return;case 0:console.log(arguments[3]);break;case 2:console.log.apply(console,n);break;default:try{console[_levels[b]].apply(console,n)}catch(r){console.log("[Logger (recovery mode)] ",n)}}}}function b(a){if(!this.traceAnonymous)return"";var b="";try{b=a.callee.caller.name}catch(c){}return b?"<"+b+"> ":"<anonymous> "+a.callee.caller+"\n"}function e(a){var b=a.name||"";return m?m.magenta(b):b}function h(a){return j(a," "+_levels[a].toUpperCase()+" ")+j(6,"["+i()+"] ")}function i(){function a(a){return 10>a?"0"+a:a}var b=new Date;return[a(b.getHours()),a(b.getMinutes()),a(b.getSeconds()),b.getMilliseconds()].join(":")}function j(a,b){return m?m[_colors[a]](b):b}var k="object"==typeof exports,l=Array.prototype.push,m=k?require("chalk"):null;return _levels=["dummy","trace","debug","info","warn","error"],_colors=["gray","gray","green",k?"cyan":"blue",k?"yellow":"darkorange","red","gray"],_o_re=/%o/gi,_j_re=/%j/gi,{log:function(){a(this,0,b(arguments),arguments)},trace:function(){a(this,1,b(arguments),arguments)},debug:function(){a(this,2,b(arguments),arguments)},info:function(){a(this,3,b(arguments),arguments)},warn:function(){a(this,4,b(arguments),arguments)},error:function(){a(this,5,b(arguments),arguments)}}}()),g});
//# sourceMappingURL=tooly.min.js.map