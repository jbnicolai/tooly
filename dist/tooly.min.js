/*!
 * tooly - version 0.0.4 (built: 2014-10-24)
 * js utility functions
 * https://github.com/Lokua/tooly.git
 * Copyright (c) 2014 Joshua Kleckner
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/MIT
 */
!function(a,b){"function"==typeof define&&define.amd?define("tooly",[],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.tooly=b()}(this,function(){function a(a,b,c){for(var d=Object.keys(a),e=0,f=d.length;f>e;e++)b.call(c,a[d[e]],d[e],a);return a}function b(a,b){return a={}.toString.call(a).match(l)[1].toLowerCase(),b?a===b.toLowerCase():a}function c(a){return[].map.call(a,function(a){return a})}function d(a){return a&&(1===a.nodeType||9===a.nodeType)}function e(a,d){var e=null;return d&&(b(d,"string")?e=select(d):b(d,"nodelist")&&(e=select(d[0]))),c((e?e:document).querySelectorAll(a))}function f(a){return j[a]||(j[a]=new RegExp("\\s*"+a+"\\s*(![\\w\\W])?","g")),j[a]}function g(a,e,f){if(b(f,"string"))html=f;else{var g=b(f);if(html=d(f)?f.outerHTML:f instanceof n.Frankie?f.els:"array"===g?f:"nodelist"===g?c(f):null,b(html,"array"))html=html.map(function(a){return a.outerHTML}).join("");else if(!html)return}e.forEach(function(b){b.insertAdjacentHTML(a?"beforeend":"afterbegin",html)})}/*!
 * @see  tooly#type
 */
function b(a,b){return a={}.toString.call(a).match(l)[1].toLowerCase(),b?a===b.toLowerCase():a}/*!
 * @see  tooly#basicExtend
 */
function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var i,j={},k=/\s+/,l=/\s([a-z]+)/i,m=Array.prototype.slice,n=function(){/*!
   * underscore's #each
   * @see  tooly#each
   */
function a(a,b,c){if(null!=a){if(g&&a.forEach===g)a.forEach(b,c);else{var d=0,e=a.length;if(e===+e)for(;e>d;d++)b.call(c,a[d],d,a);else{var f=Object.keys(a);for(e=f.length;e>d;d++)b.call(c,a[f[d]],f[d],a)}}return a}}var c,f,g=Array.prototype.forEach,h=/{(\d+)}/g;return{Frankie:function(a,b){return this instanceof n.Frankie?(this.els=d(a)?[a]:e(a,b),this):new n.Frankie(a,b)},scale:function(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d},construct:function(a,c){function d(){return"array"===b(c)?a.apply(this,c):a.call(this,c)}return d.prototype=a.prototype,new d},basicExtend:function(a,b){return _basicExtend(a,b)},extend:function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for(b(h,"boolean")&&(k=h,h=arguments[1]||{},i=2),b(h,"object")||b(h,"function")||(h={});j>i;i++)if(a=arguments[i],null!=a){b(a,"string")&&(a=a.split(""));for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&(n.isHash(e)||(f=b(e,"array")))?(f?(f=!1,g=d&&b(d,"array")?d:[]):g=d&&n.isHash(d)?d:{},h[c]=n.extend(k,g,e)):"undefined"!=typeof e&&(h[c]=e))}return h},fromPrototype:function(a,b){var c,d=Object.create(a);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},inherit:function(a,b,c){b.prototype=new a,b.prototype.constructor=b;for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])},isHash:function(a){return"object"===b(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},toType:function(a,c){return b(a,c)},/*! @alias for #toType */
type:function(a,c){return b(a,c)},isFalsy:function(a){if(void 0==a||0==a)return!0;if(b(a,"string")){var c=a.trim();return""===c||"false"===c||"undefined"===c||"null"===c}},/*! alias for #isFalsy */
falsy:function(a){return isFalsy(a)},isTruthy:function(a){return!isFalsy(a)},/*! alias for #isTruthy */
truthy:function(a){return!isFalsy(a)},contains:function(a,b,c){return a.indexOf(b,c||0)>-1},startsWith:function(a,b){return a.substring(0,b.length)===b},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},format:function(a){var b=Array.prototype.slice.call(arguments,1);return i||(i=/\%[ojdifsc]+/gi),a.replace(i,function(a){var c=b.shift();if(void 0!==c){switch(a){case"%o":case"%j":c=JSON.stringify(c);break;case"%d":case"%i":c=0|c;break;case"%f":c=parseFloat(c);break;case"%s":}return c}return a})},formatString:function(a){var b=m.call(arguments,1);return a.replace(h,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},/*! alias for #formatString */
stringFormat:function(){return n.formatString.apply(null,arguments)},formatTime:function(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=Math.floor(a-3600*b-60*c);return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d},formatMoney:function(a){var b=n.type(a,"number")?a:+a;return b.toFixed(2).replace(/./g,function(a,b,c){return!b||"."===a||(c.length-b)%3?a:","+a})},tag:function(a,b,d){c||(c=/(^[a-z]+\d{1})|[^\s]+[a-z]+(-\w+)?=(["'])(?:(?!\3)[^\\]|\\.)*\3|[.#-_a-z][-\w]+/gi,f=/area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr/i);var e,g,h=a.match(c),a=h.shift(),i="",j="",k="";if(h.forEach(function(a){var b=a.charAt(0);"#"===b?j+=a.slice(1)+'"':"."===b?i+=" "+a.slice(1)+" ":k+=" "+a}),e=f.test(a)?"":"</"+a+">",g=["<",a,j?' id="'+j:"",i?' classes="'+i.trim()+'" ':"",k?k:"",">",b,e].join(""),d){var l=document.createElement("div");return l.innerHTML=g,l.firstChild}return g},repeat:function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},sliceRel:function(a,b,c){var d=!1;return"/"===a.slice(-1)&&(d=!0,a=a.slice(0,-1)),a=a.slice(a.lastIndexOf("/")+1),d&&c&&(a+="/"),b&&(a="/"+a),a},extension:function(a){return a.substring(a.lastIndexOf(".")+1)},stripExtension:function(a){return a.substring(0,a.lastIndexOf("."))},lPad:function(a,b,c){var d=b-a.length;return d>0?n.repeat(c||" ",d)+a:a},rPad:function(a,b,c){var d=b-a.length;return d>0?a+n.repeat(c||" ",d):a},each:function(b,c,d){return a(b,c,d)},sort:function(a,b,c){var d,e,f,g,h;return _sort_re||(_sort_re=/(\d+)|(\D+)/g,_sort_dig_re=/\d+/),a.sort(function(a,i){for(d=String(a[b]).toLowerCase().match(rx),e=String(i[b]).toLowerCase().match(rx),c&&(h=d,d=e,e=h);d.length&&e.length;)if(f=d.shift(),g=e.shift(),rd.test(f)||rd.test(g)){if(!rd.test(f))return 1;if(!rd.test(g))return-1;if(f!=g)return f-g}else if(f!=g)return f>g?1:-1;return d.length-e.length})},getJSON:function(a,b,c){n.get(a,"json",b,c)},get:function(a,b,c,d){var e=new XMLHttpRequest;e.open("get",a,3===arguments.length?!0:d),e.reponseType=b,e.onload=function(){4==e.readyState&&200==e.status&&c("json"===b?JSON.parse(e.response):e.response)},e.send()},Handler:function(a){return this instanceof n.Handler?(this.context=a||this,this.handlers=this.context.handlers={},this):new n.Handler(a)},Timer:function(a){return this instanceof n.Timer?(this.name=a||"Timer_instance_"+Date.now(),this):new n.Timer(a)},funkyTime:function(a,b){var c,d,e=n.Timer(),f=n.Timer(),g=[],h=0;for(b=b||1,e.start();b>h;h++)f.start(),a.call(null,h),g.push(f.stop());return c=e.stop(),d=c/b,{stack:g,total:c,average:d,offset:function(){var a=0;return g.forEach(function(b){a+=b}),parseFloat((c-a/b).toFixed(2))}()}},Logger:function(a,b){var c=this;return n.Logger.loggers=n.Logger.loggers||[],c instanceof n.Logger||(c=new n.Logger(a,b),n.Logger.loggers.push(c)),c.level=void 0!==a?a:2,b&&(c.name=b),c.traceAnonymous=!1,c}}}();return n.Frankie.prototype.addClass=function(a){return this.els.forEach(function(b){if(!b.className)return void(b.className+=" "+a);var c=b.className;b.className+=" "+a.split(k).filter(function(a){return-1===c.indexOf(a)}).join(" ")}),this},n.Frankie.prototype.append=function(a){return g(!0,this.els,a),this},n.Frankie.prototype.attr=function(){var c=arguments.length,d=arguments[0];if(1===c){if(!b(d,"object"))return this.els[0].getAttribute(d);a(d,function(a,b){this.els.forEach(function(c){c.setAttribute(b,a)})})}else{var e=arguments[1];this.els.forEach(function(a){a.setAttribute(d,e)})}return this},n.Frankie.prototype.children=function(){var a=new n.Frankie;return this.els.forEach(function(c){var e=c.children;d(e)?a.els.push(e):"htmlcollection"===b(e)&&[].push.apply(a.els,[].slice.call(e).map(function(a){return a}))}),a},n.Frankie.prototype.css=function(){var c={},d=arguments.length;if(2===d)c[arguments[0]]=arguments[1];else{var e=this.els[0];if(1!==d)return e.style||void 0;if(_0=arguments[0],b(_0,"string"))return e.style[_0]||void 0;c=_0}return this.els.forEach(function(b){a(c,function(a,c){b.style[c]=a})}),this},n.Frankie.prototype.empty=function(){return this.els.forEach(function(a){for(;a.lastChild;)a.removeChild(a.lastChild)}),this},n.Frankie.prototype.eq=function(a){var b=new n.Frankie;return b.els=[this.els[a]],b},n.Frankie.prototype.get=function(a){return this.els[a]},n.Frankie.prototype.hasClass=function(a){var b=f(a);return this.els.some(function(c){return c.className.split(k).some(function(c){return c.match(b)==a})})},n.Frankie.prototype.html=function(a){return arguments.length?(this.els.forEach(function(b){b.innerHTML=a}),this):this.els[0].innerHTML},n.Frankie.prototype.parent=function(){var a=new n.Frankie,b={};return a.els=this.els.map(function(a){return a.parentNode}).filter(function(a){return b.hasOwnProperty(a)?!1:b[a]=!0}),a},n.Frankie.prototype.prepend=function(a){return g(!1,this.els,a),this},n.Frankie.prototype.removeClass=function(a){var b="("+a.split(k).join("|")+")";return this.els.forEach(function(a){a.className=a.className.replace(f(b)," ").trim()}),this},n.Frankie.prototype.zilch=function(){return 0===this.els.length},h(n.Handler.prototype,{on:function(a,b){return void 0===this.handlers[a]&&(this.handlers[a]=[]),this.handlers[a].push(b),this},removeAll:function(){this.handlers={}},remove:function(a){void 0!==this.handlers[a]&&(this.handlers[a].length=0)},executeHandler:function(a){for(var b=this.handlers[a]||[],c=0,d=b.length;d>c;c++)b[c].apply(this.context,[]);return this},trigger:function(a){return this.executeHandler(a)},registerCallbacks:function(a){var b=this,c={};if(void 0!==a)for(c in a)a.hasOwnProperty(c)&&b.on(c,a[c]);return b},toString:function(){return"[Handler ' "+this+" ']"}}),h(n.Timer.prototype,{start:function(){this.startTime=Date.now()},stop:function(){return this.endTime=Date.now(),this.elapsed=this.endTime-this.startTime,this.elapsed},end:function(){return this.stop(),this.log(),this.elapsed},log:function(){console.log(this.name+" "+this.elapsed)}}),h(n.Logger.prototype,function(){function a(a,b,e,f){if(!(n.Logger.off||-1===a.level||b<a.level||a.level>5)){var j="%s%s",l=[];if(f=m.call(f),i=i||/\%[ojdifsc]/g,g)n.type(f[0],"string")&&f[0].match(i)&&(j+=f.shift().replace(_o_re,"%j")),l.unshift(j,c(a),d(b));else{j="%c%s%c%s%c%s",n.type(f[0],"string")&&f[0].match(i)&&(j+=f.shift().replace(_j_re,"%o")),e=void 0!==e&&""===e.replace(k,"")?"":e;var o="color:"+_colors[b]+";",p="color:purple",q="color:black";l=[j,p,c(a),o,d(b),q,e]}switch(h.apply(l,f),b){case-1:return;case 0:console.log(arguments[3]);break;case 2:console.log.apply(console,l);break;default:try{console[_levels[b]].apply(console,l)}catch(r){console.log("[Logger (recovery mode)] ",l)}}}}function b(a){if(!this.traceAnonymous)return"";var b="";try{b=a.callee.caller.name}catch(c){}return b?"<"+b+"> ":"<anonymous> "+a.callee.caller+"\n"}function c(a){var b=a.name||"";return j?j.magenta(b):b}function d(a){return f(a," "+_levels[a].toUpperCase()+" ")+f(6,"["+e()+"] ")}function e(){function a(a){return 10>a?"0"+a:a}var b=new Date;return[a(b.getHours()),a(b.getMinutes()),a(b.getSeconds()),b.getMilliseconds()].join(":")}function f(a,b){return j?j[_colors[a]](b):b}var g="object"==typeof exports,h=Array.prototype.push,j=g?require("chalk"):null;return _levels=["dummy","trace","debug","info","warn","error"],_colors=["gray","gray","green",g?"cyan":"blue",g?"yellow":"darkorange","red","gray"],_o_re=/%o/gi,_j_re=/%j/gi,{log:function(){a(this,0,b(arguments),arguments)},trace:function(){a(this,1,b(arguments),arguments)},debug:function(){a(this,2,b(arguments),arguments)},info:function(){a(this,3,b(arguments),arguments)},warn:function(){a(this,4,b(arguments),arguments)},error:function(){a(this,5,b(arguments),arguments)}}}()),n});
//# sourceMappingURL=tooly.min.js.map