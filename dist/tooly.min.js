/*!
 * tooly - version 0.0.4 (built: 2014-10-19)
 * js utility functions
 * https://github.com/Lokua/tooly.git
 * Copyright (c) 2014 Joshua Kleckner
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/MIT
 */
!function(a,b){"function"==typeof define&&define.amd?define("tooly",[],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.tooly=b()}(this,function(){var a=function(){function b(a,b){return a={}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase(),b?a===b.toLowerCase():a}function c(a,b,c){if(null!=a){if(k&&a.forEach===k)a.forEach(b,c);else{var d=0,e=a.length;if(e===+e)for(;e>d;d++)b.call(c,a[d],d,a);else{var f=Object.keys(a);for(e=f.length;e>d;d++)b.call(c,a[f[d]],f[d],a)}}return a}}function d(a){return[].map.call(a,function(a){return a})}function e(a){return a.sort().filter(function(b,c){return!c||b!=a[c-1]})}function f(a){return new RegExp("\\s*"+a+"\\s*(![\\w\\W])?","g")}function g(a,b,c){var d=a.className.split(l);return d.some(function(a){return a.match(c)==b})}function h(a,b){if(!a.className)return void(a.className+=b?" "+b:"");var c=a.className;a.className+=" "+b.split(l).filter(function(a){return-1===c.indexOf(a)}).join(" ")}function i(a){return a&&(1===a.nodeType||9===a.nodeType)}function j(c){return c instanceof a.Frankie?c.els:b(c,"string")?a.selectAll(c):b(c,"nodelist")?d(c):c}var k=Array.prototype.forEach,l=/\s+/;return{select:function(a,b){return(i(b)?b:document).querySelector(a)},selectAll:function(a,b){return d((i(b)?b:document).querySelectorAll(a))},parent:function(a){var c=j(a);return i(c)?c.parentNode:b(c,"array")?e(c.map(function(a){return a.parentNode})):void 0},children:function(a){var c=j(a);return i(c)?c.children:b(c,"array")?c.map(function(a){return a.children}):void 0},hasClass:function(a,c){var d=j(a);if(i(d))return g(d,c,f(c));if(b(d,"array")){var e=f(c);return d.some(function(a,b,d){return g(d[b],c,e)})}return!1},addClass:function(c,d){var e=j(c);return i(e)?h(e,d):b(e,"array")&&e.forEach(function(a){h(a,d)}),a},removeClass:function(c,d){function e(a){a.className=a.className.replace(f(d)," ").trim()}var g=j(c);return d="("+d.split(l).join("|")+")",i(g)?e(g):b(g,"array")&&g.forEach(e),a},prepend:function(c,d){function e(a){a.insertAdjacentHTML("afterbegin",d)}var f=j(c);return i(f)?e(f):b(f,"array")&&f.forEach(e),a},append:function(c,d){function e(a){a.insertAdjacentHTML("beforeend",d)}var f=j(c);return i(f)?e(f):b(f,"array")&&f.forEach(e),a},empty:function(c){var d=j(c);if(b(d,"array"))d.forEach(function(a){for(;a.lastChild;)a.removeChild(a.lastChild)});else for(;d.lastChild;)d.removeChild(d.lastChild);return a},html:function(c,d){if(1===arguments.length)return"array"===b(c)&&i(c[0])?c[0].innerHTML:i(c)?c.innerHTML:a.select(c).innerHTML;if(!i(c)){if("array"===b(c)){for(var e=0,f=c.length;f>e;e++)i(c[e])?c[e].innerHTML=d:(c[e]=a.select(c[e]),c[e].innerHTML=d);return a}return a.select(c).innerHTML=d,a}return c.innerHTML=d,a},css:function(){var c=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])},d=j(arguments[0]),e=arguments.length,f={},g=!0;if(e>1&&(3===e?f[arguments[1]]=arguments[2]:f=arguments[1]),f){if(i(d))return c(d,f),a;if(b(d,"array"))return g=!1,d.forEach(function(a){c(a,f)}),a}return g?d.style:d[0].style||void 0},attr:function(){var c,d,e=j(arguments[0]),f=arguments.length,g=b(e,"array");if(!g&&!i(e)||1>=f||f>3)return null;if(d=arguments[1],2===f){if(!b(d,"object"))return c=(g?e[0]:e).getAttribute(d),""===c?null:c;for(var h in d)d.hasOwnProperty(h)&&(g?e.forEach(function(a){a.setAttribute(h,d[h])}):e.setAttribute(h,d[h]))}else if(g){var k=arguments[2];e.forEach(function(a){a.setAttribute(d,k)})}else e.setAttribute(d,arguments[2]);return a},Frankie:function(b,c){return this instanceof a.Frankie?(this.els=i(b)?[b]:a.selectAll(b,c),this):new a.Frankie(b,c)},scale:function(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d},construct:function(a,c){function d(){return"array"===b(c)?a.apply(this,c):a.call(this,c)}return d.prototype=a.prototype,new d},extend:function(){var c,d,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"===b(i)&&(l=i,i=arguments[1]||{},j=2),"object"!==b(i)&&"function"!==b(i)&&(i={});k>j;j++)if(c=arguments[j],null!=c){"string"===b(c)&&(c=c.split(""));for(d in c)e=i[d],f=c[d],i!==f&&(l&&f&&(a.isHash(f)||(g="array"===b(f)))?(g?(g=!1,h=e&&"array"===b(e)?e:[]):h=e&&a.isHash(e)?e:{},i[d]=a.extend(l,h,f)):"undefined"!=typeof f&&(i[d]=f))}return i},fromPrototype:function(b,c){var d,e=a.objectCreate(b);for(d in c)c.hasOwnProperty(d)&&(e[d]=c[d]);return e},inherit:function(a,b,c){b.prototype=new a,b.prototype.constructor=b;for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])},isHash:function(a){return"object"===b(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},toType:function(a,c){return b(a,c)},/*! @alias for #toType */
type:function(a,c){return b(a,c)},isFalsy:function(b){if(void 0==b||0==b)return!0;if(a.type(b,"string")){var c=b.trim();return""===c||"false"===c||"undefined"===c||"null"===c}},/*! alias for #isFalsy */
falsy:function(a){return isFalsy(a)},isTruthy:function(a){return!isFalsy(a)},/*! alias for #isTruthy */
truthy:function(a){return!isFalsy(a)},contains:function(a,b,c){return a.indexOf(b,c||0)>-1},startsWith:function(a,b){return a.substring(0,b.length)===b},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},format:function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\%[ojdifs]+/gi,function(a){var c=b.shift();return void 0!==c?(("%o"===a||"%j"===a)&&(c=JSON.stringify(c)),("%d"===a||"%i"===a)&&(c=0|c),"%f"===a&&(c=parseFloat(c)),c):a})},formatString:function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},/*! alias for #formatString */
stringFormat:function(){return a.formatString.apply(arguments)},formatTime:function(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=Math.floor(a-3600*b-60*c);return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d},formatMoney:function(b){var c=a.type(b,"number")?b:+b;return c.toFixed(2).replace(/./g,function(a,b,c){return!b||"."===a||(c.length-b)%3?a:","+a})},repeat:function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},sliceRel:function(a,b,c){var d=!1;return"/"===a.slice(-1)&&(d=!0,a=a.slice(0,-1)),a=a.slice(a.lastIndexOf("/")+1),d&&c&&(a+="/"),b&&(a="/"+a),a},extension:function(a){return a.substring(a.lastIndexOf(".")+1)},stripExtension:function(a){return a.substring(0,a.lastIndexOf("."))},lPad:function(b,c,d){var e=c-b.length;return e>0?a.repeat(d||" ",e)+b:b},rPad:function(b,c,d){var e=c-b.length;return e>0?b+a.repeat(d||" ",e):b},each:function(a,b,d){return c(a,b,d)},sort:function(a,b,c){var d,e,f,g,h,i=/(\d+)|(\D+)/g,j=/\d+/;return a.sort(function(a,k){for(d=String(a[b]).toLowerCase().match(i),e=String(k[b]).toLowerCase().match(i),c&&(h=d,d=e,e=h);d.length&&e.length;)if(f=d.shift(),g=e.shift(),j.test(f)||j.test(g)){if(!j.test(f))return 1;if(!j.test(g))return-1;if(f!=g)return f-g}else if(f!=g)return f>g?1:-1;return d.length-e.length})},getJSON:function(b,c,d){a.get(b,"json",c,d)},get:function(a,b,c,d){var e=new XMLHttpRequest;e.open("get",a,3===arguments.length?!0:d),e.reponseType=b,e.onload=function(){4==e.readyState&&200==e.status&&c("json"===b?JSON.parse(e.response):e.response)},e.send()},Handler:function(b){return this instanceof a.Handler?(this.context=b||this,this.handlers=this.context.handlers={},this):new a.Handler(b)},Timer:function(b){return this instanceof a.Timer?(this.name=b||"Timer_instance_"+Date.now(),this):new a.Timer(b)},funkyTime:function(b,c){var d,e,f=a.Timer(),g=a.Timer(),h=[],i=0;for(c=c||1,f.start();c>i;i++)g.start(),b.call(null,i),h.push(g.stop());return d=f.stop(),e=d/c,{stack:h,total:d,average:e,offset:function(){var a=0;return h.forEach(function(b){a+=b}),parseFloat((d-a/c).toFixed(2))}()}},Logger:function(b,c){var d=this;return a.Logger.loggers=a.Logger.loggers||[],d instanceof a.Logger||(d=new a.Logger(b,c),a.Logger.loggers.push(d)),d.level=void 0!==b?b:2,c&&(d.name=c),d.traceAnonymous=!1,d}}}();return a.Frankie.prototype={get:function(a){return this.els[a]},eq:function(b){return new a.Frankie(this.els[b],this.parent())},zilch:function(){return 0===this.els.length},parent:function(){var b=a.parent(this.els),c=new a.Frankie;return b instanceof Array&&(c.els=b),c},children:function(){var b=a.children(this.els),c=new a.Frankie;return b instanceof Array&&(c.els=b),c},hasClass:function(b){return a.hasClass(this.els,b)},addClass:function(b){return a.addClass(this.els,b),this},removeClass:function(b){return a.removeClass(this.els,b),this},prepend:function(b){return a.prepend(this.els,b),this},append:function(b){return a.append(this.els,b),this},html:function(b){return b?(a.html(this.els,b),this):a.html(this.els[0])},css:function(){var b=[this.els];return[].push.apply(b,arguments),a.css.apply(null,b),this},attr:function(){var b=[this.els];[].push.apply(b,arguments);var c=a.attr.apply(null,b);return c}},a.Handler.prototype={on:function(a,b){return void 0===this.handlers[a]&&(this.handlers[a]=[]),this.handlers[a].push(b),this},removeAll:function(){this.handlers={}},remove:function(a){void 0!==this.handlers[a]&&(this.handlers[a].length=0)},executeHandler:function(a){for(var b=this.handlers[a]||[],c=0,d=b.length;d>c;c++)b[c].apply(this.context,[]);return this},trigger:function(a){return this.executeHandler(a)},registerCallbacks:function(a){var b=this,c={};if(void 0!==a)for(c in a)a.hasOwnProperty(c)&&b.on(c,a[c]);return b},toString:function(){return"[Handler ' "+this+" ']"}},a.Timer.prototype={start:function(){this.startTime=Date.now()},stop:function(){return this.endTime=Date.now(),this.elapsed=this.endTime-this.startTime,this.elapsed},end:function(){return this.stop(),this.log(),this.elapsed},log:function(){console.log(this.name+" "+this.elapsed)}},a.Logger.prototype=function(){function b(b,c,f,g){if(!(a.Logger.off||-1===b.level||c<b.level||b.level>5)){g=i.call(g);var k="%s%s",l=[];if(h)a.type(g[0],"string")&&g[0].match(/\%(s|j|d|o)/g)&&(k+=g.shift().replace(/%o/gi,"%j")),l.unshift(k,d(b),e(c));else{k="%c%s%c%s%c%s",a.type(g[0],"string")&&g[0].match(/\%(c|s|o|O|d|i|f)/g)&&(k+=g.shift()),f=void 0!==f&&""===f.replace(/\s+/,"")?"":f;var m="color:"+_colors[c]+";",n="color:purple",o="color:black";l=[k,n,d(b),m,e(c),o,f]}switch(j.apply(l,g),c){case-1:return;case 0:console.log(arguments[3]);break;case 2:console.log.apply(console,l);break;default:try{console[_levels[c]].apply(console,l)}catch(p){console.log("[Logger (recovery mode)] ",l)}}}}function c(a){var b="";try{b=a.callee.caller.name}catch(c){}return!b&&this.traceAnonymous?"<anonymous> "+a.callee.caller+"\n":"<"+b+"> "}function d(a){var b=a.name||"";return k?k.magenta(b):b}function e(a){return g(a," "+_levels[a].toUpperCase()+" ")+g(6,"["+f()+"] ")}function f(){function a(a){return 10>a?"0"+a:a}var b=new Date;return[a(b.getHours()),a(b.getMinutes()),a(b.getSeconds()),b.getMilliseconds()].join(":")}function g(a,b){return k?k[_colors[a]](b):b}var h="object"==typeof exports,i=Array.prototype.slice,j=Array.prototype.push,k=h?require("chalk"):null;return _levels=["dummy","trace","debug","info","warn","error"],_colors=["gray","gray","green",h?"cyan":"blue",h?"yellow":"darkorange","red","gray"],{log:function(){b(this,0,c(arguments),arguments)},trace:function(){b(this,1,c(arguments),arguments)},debug:function(){b(this,2,c(arguments),arguments)},info:function(){b(this,3,c(arguments),arguments)},warn:function(){b(this,4,c(arguments),arguments)},error:function(){b(this,5,c(arguments),arguments)}}}(),a});
//# sourceMappingURL=tooly.min.js.map