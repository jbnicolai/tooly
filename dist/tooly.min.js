/**
 * tooly - version 0.0.1 (built: 2014-08-22)
 * js utility functions
 * https://github.com/Lokua/tooly.git
 * Copyright (c) 2014 Joshua Kleckner
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define("tooly",[],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.tooly=b()}(this,function(){var a=function(){function b(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function c(a){return new RegExp("\\s*"+a+"\\s*(?![\\w\\W])","g")}function d(a,c,d){if("array"===b(c)){for(var e,f=0,g=a.length;g>f;f++)e=d(a[f],c);return e}}function e(a,c,d){if("array"===b(a))for(var e=0,f=a.length;f>e;e++)d(a[e],c)}function f(a){return a&&(1===a.nodeType||9===a.nodeType)}function g(b){var c=b.callee.caller.name;if(!c){var d="<anonymous>";return a.logger.traceAnonymous?d+" "+b.callee.caller+"\n":d}return c}function h(b,c,d){if(!(0===a.logger.level||b<a.logger.level)){var d=(a.logger,k.call(d,0)),c=c+" 	",e="%c%s%c%s%o",f="color: #0080FF; font-style: italic";switch(b){case 0:return;case 1:console.trace(e,"color: #800080;","[TRACE] ",f,c,d);break;case 2:console.log(e,"color: #008000;","[DEBUG] ",f,c,d);break;case 3:console.info(e,"color: #0000FF;","[INFO] ",f,c,d);break;case 4:console.warn(e,"color: #FFA500;","[WARN] ",f,c,d);break;case 5:console.error(e,"color: #FF0000;","[ERROR] ",f,c,d);break;default:return}}}var j=/\s+/,k=Array.prototype.slice;return{hasClass:function(b,e){if(!f(b))return!1;if(d(b,e,a.hasClass))return!0;for(var g=c(e),h=b.className.split(j),i=h.length,k=0;i>k;k++)if(h[k].match(g)==e)return!0;return!1},addClass:function(b,c){return f(b)?(d(b,c,a.addClass),b.className+=" "+c,a):a},removeClass:function(b,e){return f(b)?(d(b,e,a.removeClass),b.className=b.className.replace(c(e)," "),a):a},prepend:function(b,c){return f(b)?(e(b,c,a.prepend),b.innerHTML=c+b.innerHTML,a):a},append:function(b,c){return f(b)?(e(b,c,a.append),b.innerHTML+=c,a):a},html:function(c,e){return f(c)?1===arguments.length?"array"===b(c)?c[i].innerHTML:c.innerHTML:(d(c,e,a.html),c.innerHTML=e,a):a},select:function(a,b){return b=b||document,b.querySelector(a)},selectAll:function(a,b){for(var c=(b||document).querySelectorAll(a),d=[],e=0,f=c.length;f>e;e++)d[e]=c[e];return d},construct:function(a,c){function d(){return"array"===b(c)?a.apply(this,c):a.call(this,c)}return d.prototype=a.prototype,new d},extend:function(){var c,d,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"===b(i)&&(l=i,i=arguments[1]||{},j=2),"object"!==b(i)&&"function"!==b(i)&&(i={});k>j;j++)if(c=arguments[j],null!=c){"string"===b(c)&&(c=c.split(""));for(d in c)e=i[d],f=c[d],i!==f&&(l&&f&&(a.isHash(f)||(g="array"===b(f)))?(g?(g=!1,h=e&&"array"===b(e)?e:[]):h=e&&a.isHash(e)?e:{},i[d]=a.extend(l,h,f)):"undefined"!=typeof f&&(i[d]=f))}return i},fromPrototype:function(b,c){var d,e=a.objectCreate(b);for(d in c)c.hasOwnProperty(d)&&(e[d]=c[d]);return e},fromProto:function(b,c){return a.fromPrototype(b,c)},inherit:function(a,b,c){b.prototype=new a,b.prototype.constructor=b;for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])},isHash:function(a){return"object"===b(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},objectCreate:function(a){var b=function(){};return b.prototype=a,new b},propCount:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},propsOf:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},getJSON:function(a,b,c){var d=new XMLHttpRequest;d.open("get",a,2===arguments.length?!0:c),d.reponseType="json",d.onreadystatechange=function(){4==d.readyState&&200==d.status&&b(d.response)},d.send()},logger:{level:1,traceAnonymous:!0},trace:function(){h(1,g(arguments),arguments)},debug:function(){h(2,g(arguments),arguments)},info:function(){h(3,g(arguments),arguments)},warn:function(){h(4,g(arguments),arguments)},error:function(){h(5,g(arguments),arguments)},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},format:function(a){var b=k.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},formatTime:function(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=Math.floor(a-3600*b-60*c);return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d},repeat:function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},scale:function(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d},sliceRel:function(a,b,c){var d=!1;return"/"===a.slice(-1)&&(d=!0,a=a.slice(0,-1)),a=a.slice(a.lastIndexOf("/")+1),d&&c&&(a=a.concat("/")),b&&(a="/"+a),a},toType:function(a){return b(a)}}}();return a});