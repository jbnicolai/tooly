/*! tooly v0.7.1 | Copyright 2014 Joshua Kleckner | http://lokua.net/license */
!function(a,b){"function"==typeof define&&define.amd?define("tooly",[],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.tooly=b()}(this,function(){function a(a,b){return a={}.toString.call(a).match(q)[1].toLowerCase(),b?a===b.toLowerCase():a}function b(a,b,c){if(a.forEach&&a.forEach===r.forEach)a.forEach(b,c);else for(var d=Object.keys(a),e=0,f=d.length;f>e;e++)b.call(c,a[d[e]],d[e],a);return a}function c(a){return[].map.call(a,u)}function d(a){return a&&(1===a.nodeType||9===a.nodeType)}function e(b,c){var d;return c&&a(c,"string")&&(d=document.querySelector(c)),(d?d:document).querySelector(b)}function f(b,f){var g=null;return f&&(a(f,"string")?g=e(f):a(f,"nodelist")?g=e(f[0]):d(f)&&(g=f)),c((g?g:document).querySelectorAll(b))}function g(a){return y[a]||(y[a]=new RegExp("\\s*"+a+"\\s*(![\\w\\W])?","g")),y[a]}function h(b,e,f){if(a(f,"string"))h=f;else{var g=a(f),h=d(f)?f.outerHTML:f instanceof v.Frankie?f.els:"array"===g?f:"nodelist"===g?c(f):null;if(a(h,"array"))h=h.map(function(a){return a.outerHTML}).join("");else if(!h)return}e.forEach(function(a){a.insertAdjacentHTML(b?"beforeend":"afterbegin",h)})}function i(a,b,c){var d=a.options.level;if(!(v.Logger.off||-1===d||d>b||d>5)){var e="%s%s",f=[];if(c=s.call(c),o=o||/\%[ojdifsc]/g,A)v.type(c[0],"string")&&c[0].match(o)&&(e+=c.shift().replace(F,"%j")),f.unshift(e,k(a),l(b,a));else{e="%c%s%c%s%c%s%c",v.type(c[0],"string")&&(e+=o.test(c[0])?c.shift().replace(G,"%o"):c.shift());var g="color:"+E[b]+";";f=[e,a.options.nameFormat,k(a),a.options.bypassLevel?"":g,a.options.bypassLevel?"":l(b,a),a.options.bypassLine?"":a.options.lineFormat,j(a),a.options.textFormat]}switch(B.apply(f,c),b){case-1:return;case 0:console.log(arguments[2]);break;case 2:console.log.apply(console,f);break;default:try{console[D[b]].apply(console,f)}catch(h){console.log("[Logger (recovery mode)] ",f)}}}}function j(a){var b=new Error,c=b.stack.split("\n"),d=c[c.length-1];return d=d.substring(d.lastIndexOf("/")+1,d.length-1),a.options.bypassLine?"":"["+d+"] "}function k(a){var b=a.name||"";return C?C.magenta(b):b}function l(a,b){return n(a," "+D[a].toUpperCase()+" ")+(b.options.bypassTimestamp?"":n(6,"["+m()+"] "))}function m(){function a(a){return 10>a?"0"+a:a}var b=new Date;return[a(b.getHours()),a(b.getMinutes()),a(b.getSeconds()),b.getMilliseconds()].join(":")}function n(a,b){return C?C[E[a]](b):b}var o,p=/\s+/,q=/\s([a-z]+)/i,r=Array.prototype,s=r.slice,t=function(){},u=function(a){return a},v={};v.noop=t,v.indentity=u,v.each=function(a,c,d){return b(a,c,d)};var w,x;v.sort=function(a,b,c){var d,e,f,g,h;return w||(w=/(\d+)|(\D+)/g,x=/\d+/),a.sort(function(a,i){for(d=String(a[b]).toLowerCase().match(w),e=String(i[b]).toLowerCase().match(w),c&&(h=d,d=e,e=h);d.length&&e.length;)if(f=d.shift(),g=e.shift(),x.test(f)||x.test(g)){if(!x.test(f))return 1;if(!x.test(g))return-1;if(f!=g)return f-g}else if(f!=g)return f>g?1:-1;return d.length-e.length})};var y={};v.Frankie=function(a,b){return this instanceof v.Frankie?(this.els=d(a)?[a]:f(a,b),this):new v.Frankie(a,b)},v.Frankie.prototype.addClass=function(a){return this.els.forEach(function(b){if(!b.className)return void(b.className+=" "+a);var c=b.className;b.className+=" "+a.split(p).filter(function(a){return-1===c.indexOf(a)}).join(" ")}),this},v.Frankie.prototype.append=function(a){return h(!0,this.els,a),this},v.Frankie.prototype.attr=function(){var c=arguments.length,d=arguments[0];if(1===c){if(!a(d,"object"))return this.els[0].getAttribute(d);var e=this;b(d,function(a,b){e.els.forEach(function(c){c.setAttribute(b,a)})})}else{var f=arguments[1];this.els.forEach(function(a){a.setAttribute(d,f)})}return this},v.Frankie.prototype.children=function(){var b=new v.Frankie;return this.els.forEach(function(c){var e=c.children;d(e)?b.els.push(e):"htmlcollection"===a(e)&&[].push.apply(b.els,[].slice.call(e).map(u))}),b},v.Frankie.prototype.css=function(){var c={},d=arguments.length;if(2===d)c[arguments[0]]=arguments[1];else{var e=this.els[0];if(1!==d)return e.style||void 0;if(_0=arguments[0],a(_0,"string"))return e.style[_0]||void 0;c=_0}return this.els.forEach(function(a){b(c,function(b,c){a.style[c]=b})}),this},v.Frankie.prototype.each=function(a){for(var b=0,c=this.els.length;c>b;b++)a.call(this.els[b],b);return this},v.Frankie.prototype.empty=function(){return this.els.forEach(function(a){for(;a.lastChild;)a.removeChild(a.lastChild)}),this},v.Frankie.prototype.eq=function(a){var b=new v.Frankie;return b.els=[this.els[a]],b},v.Frankie.prototype.find=function(a){var b=v.Frankie(a),c=this,d=[];return b.els.forEach(function(a){c.els.forEach(function(b){b.contains(a)&&d.push(a)})}),b.els=d,b},v.Frankie.prototype.get=function(a){return this.els[a]},v.Frankie.prototype.hasClass=function(a){var b=g(a);return this.els.some(function(c){return c.className.split(p).some(function(c){return c.match(b)==a})})},v.Frankie.prototype.html=function(a){if(!arguments.length){if(void 0===this.els[0])return;return this.els[0].innerHTML}return this.els.forEach(function(b){b.innerHTML=a}),this},v.Frankie.prototype.on=function(a,b){return this.els.forEach(function(c){c.addEventListener(a,b,!1)}),this},v.Frankie.prototype.parent=function(){var a=new v.Frankie,b={};return a.els=this.els.map(function(a){return a.parentNode}).filter(function(a){return b.hasOwnProperty(a)?!1:b[a]=!0}),a},v.Frankie.prototype.prepend=function(a){return h(!1,this.els,a),this},v.Frankie.prototype.remove=function(b,e){var f,g,h=[],i=this,j=i.els.length;if(g=a(b,"array")?b:d(b)?c(b):g instanceof v.Frankie?b.els:a(b,"string")?new v.Frankie(b,i).els:null,g&&g.forEach(function(a){for(f=0;j>f;f++){var b=i.els[f];if(a.parentNode===b)return void(e?h.push(b.removeChild(a)):b.removeChild(a))}}),e){var k=new Frankie;return k.els=h,k}return i},v.Frankie.prototype.removeClass=function(a){var b="("+a.split(p).join("|")+")";return this.els.forEach(function(a){a.className=a.className.replace(g(b)," ").trim()}),this},v.Frankie.prototype.toggleClass=function(a){for(var b,c=0,d=this.els.length;d>c;c++)b=this.eq(c),b.hasClass(a)?b.removeClass(a):b.addClass(a);return this},v.Frankie.prototype.zilch=function(){return 0===this.els.length},v.Handler=function(a){return this instanceof v.Handler?(this.context=a||this,this.handlers=this.context.handlers={},this):new v.Handler(a)},v.Handler.prototype.on=function(a,b){return void 0===this.handlers[a]&&(this.handlers[a]=[]),this.handlers[a].push(b),this},v.Handler.prototype.register=function(a){var b,c=this;if(void 0!==a)for(b in a)a.hasOwnProperty(b)&&c.on(b,a[b]);return c},v.Handler.prototype.remove=function(a){void 0!==this.handlers[a]&&delete this.handlers[a]},v.Handler.prototype.removeAll=function(){this.handlers={}},v.Handler.prototype.trigger=function(a){for(var b=this.handlers[a]||[],c=0,d=b.length;d>c;c++)b[c].apply(this.context,[]);return this};var z={level:0,bypassLevel:!1,bypassTimestamp:!0,bypassLine:!0,textFormat:"color:black;",lineFormat:"color:gray;font-size:10px;",nameFormat:"color:magenta"};v.Logger=function(a,b){var c=this;if(v.Logger.loggers=v.Logger.loggers||[],c instanceof v.Logger||(c=new v.Logger(a,b),v.Logger.loggers.push(c)),b){var d=v.type(b);if("object"===d){for(var e in z)b.hasOwnProperty(e)||(b[e]=z[e]);c.options=b}else"number"===d&&(c.options.level=b)}else c.options=z;return a&&(c.name=a),c};var A="object"==typeof exports,B=r.push,C=A?require("chalk"):null,D=["dummy","trace","debug","info","warn","error"],E=["gray","gray","green",A?"cyan":"blue",A?"yellow":"darkorange","red","gray"],F=/%o/gi,G=/%j/gi;v.Logger.prototype.group=function(){return arguments.length?1===arguments.length?console.group(arguments[0]):console.group.apply(console,s.call(arguments,0)):console.group(),this},v.Logger.prototype.groupEnd=function(){return console.groupEnd(),this},v.Logger.prototype.log=function(){return i(this,0,arguments),this},v.Logger.prototype.trace=function(){return i(this,1,arguments),this},v.Logger.prototype.debug=function(){return i(this,2,arguments),this},v.Logger.prototype.info=function(){return i(this,3,arguments),this},v.Logger.prototype.warn=function(){return i(this,4,arguments),this},v.Logger.prototype.error=function(){return i(this,5,arguments),this},v.construct=function(a){function b(){return d>2?a.apply(this,s.call(c,1)):2===d?a.call(this,c[1]):a.call(this)}var c=arguments,d=c.length;return b.prototype=a.prototype,new b},v.extend=function(){var c,d=s.call(arguments),e=d.shift();return e=e||{},b(d,function(b){for(c in b)b.hasOwnProperty(c)&&(e[c]="object"===a(b[c])?v.extend(e[c],b[c]):b[c])}),e},v.falsy=v.isFalsy=function(b){if(void 0==b||0==b)return!0;if(a(b,"string")){var c=b.trim();return""===c||"false"===c||"undefined"===c||"null"===c}},v.fromPrototype=function(a,b){var c,d=Object.create(a);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},v.inherit=function(a,b,c){b.prototype=new a,b.prototype.constructor=b;for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])},v.scale=function(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d},v.truthy=v.isTruthy=function(a){return!v.isFalsy(a)},v.type=v.toType=function(b,c){return a(b,c)},v.contains=function(a,b,c){return a.indexOf(b,c||0)>-1},v.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)},v.extension=function(a){return a.substring(a.lastIndexOf(".")+1)},v.format=function(a){var b=s.call(arguments,1);return o||(o=/\%[ojdifsc]+/gi),a.replace(o,function(a){var c=b.shift();if(void 0!==c){switch(a){case"%o":case"%j":c=JSON.stringify(c);break;case"%d":case"%i":c=0|c;break;case"%f":c=parseFloat(c);break;case"%s":}return c}return a})},v.formatMoney=function(b,c){var d=a(b,"number")?b:+b;return(c||"")+d.toFixed(2).replace(/./g,function(a,b,c){return!b||"."===a||(c.length-b)%3?a:","+a})};var H=/{(\d+)}/g;v.formatString=v.stringFormat=function(a){var b=s.call(arguments,1);return a.replace(H,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})},v.formatTime=function(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=Math.floor(a-3600*b-60*c);return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d},v.leftPad=v.leftpad=v.lpad=v.lPad=function(a,b,c){var d=b-(a+"").length;return d>0?v.repeat(c||" ",d)+a:a},v.repeat=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},v.rightPad=v.rightpad=v.rPad=v.rpad=function(a,b,c){var d=b-(a+"").length;return d>0?a+v.repeat(c||" ",d):a},v.sliceRel=function(a,b,c){var d=!1;return"/"===a.slice(-1)&&(d=!0,a=a.slice(0,-1)),a=a.slice(a.lastIndexOf("/")+1),d&&c&&(a+="/"),b&&(a="/"+a),a},v.startsWith=function(a,b){return a.substring(0,b.length)===b},v.stripExtension=v.stripExt=function(a){return a.substring(0,a.lastIndexOf("."))};var I;return v.tag=function(a,b,c){I=I||/([^.#]+)|([.#]{1}[^.#]+)/g;var d,e=a.match(I),d=e[0].charAt(0),f=document.createElement(/[#.]/.test(d)?"div":e.shift()),g="",h=[];if(e.forEach(function(a){return d=a.charAt(0),"."===d?h.push(a.replace(".","")):"#"===d?g=a.replace("#",""):void 0}),h.length&&f.setAttribute("class",h.join(" ")),""!==g&&f.setAttribute("id",g),b.nodeType||"object"!=typeof b)"string"==typeof b?f.appendChild(document.createTextNode(b)):(b.nodeType&&1===b.nodeType||9===b.nodeType)&&f.appendChild(b);else{for(var i in b)b.hasOwnProperty(i)&&"content"!==i&&f.setAttribute(i,b[i]);b.hasOwnProperty("content")&&(void 0===b.content.nodeType&&(b.content=document.createTextNode(b.content)),f.appendChild(b.content))}return c?f.outerHTML:f},v.Timer=function(a){return this instanceof v.Timer?(this.name=a||"Timer_instance_"+Date.now(),this):new v.Timer(a)},v.Timer.prototype.end=function(){return this.stop(),this.log(),this.elapsed},v.funkyTime=function(a,b){var c,d,e=v.Timer(),f=v.Timer(),g=[],h=0;for(b=b||1,e.start();b>h;h++)f.start(),a.call(null,h),g.push(f.stop());return c=e.stop(),d=c/b,{stack:g,total:c,average:d,offset:function(){var a=0;return g.forEach(function(b){a+=b}),parseFloat((c-a/b).toFixed(2))}()}},v.Timer.prototype.log=function(){console.log(this.name+" "+this.elapsed)},v.Timer.prototype.start=function(){this.startTime=Date.now()},v.Timer.prototype.stop=function(){return this.endTime=Date.now(),this.elapsed=this.endTime-this.startTime,this.elapsed},v.Timer.prototype.toString=function(){return this.elapsed+""},v.get=function(a,b,c,d){var e=new XMLHttpRequest;e.open("get",a,3===arguments.length?!0:d),e.reponseType=b,e.onload=function(){4==e.readyState&&200==e.status&&c("json"===b?JSON.parse(e.response):e.response)},e.send()},v.getJSON=function(a,b,c){v.get(a,"json",b,c)},v});
//# sourceMappingURL=tooly.min.js.map